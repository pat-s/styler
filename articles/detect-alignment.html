<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alignment detection • styler</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Alignment detection">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">styler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/customizing_styler.html">Customizing styler</a>
    </li>
    <li>
      <a href="../articles/detect-alignment.html">Alignment detection</a>
    </li>
    <li>
      <a href="../articles/gsoc_proposal/data_structures.html">Data Structures</a>
    </li>
    <li>
      <a href="../articles/gsoc_proposal/manipulating_nested_parse_data.html">Manipulating the nested parse table</a>
    </li>
    <li>
      <a href="../articles/introducing_styler.html">An introduction to styler</a>
    </li>
    <li>
      <a href="../articles/performance_improvements.html">Performance Improvements</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/styler">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Alignment detection</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/styler/blob/master/vignettes/detect-alignment.Rmd"><code>vignettes/detect-alignment.Rmd</code></a></small>
      <div class="hidden name"><code>detect-alignment.Rmd</code></div>

    </div>

    
    
<p>Sometimes, you deliberately align code to make it more readable.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  <span class="dt">a =</span>       <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="dt">b =</span> <span class="dv">3213232</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">)</a></code></pre></div>
<p>Until styler 1.1.1.9002 (with <code>strict = TRUE</code>, e.g. as in <code>styler_style_file(..., strict = TRUE)</code>), this was formatted as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="dt">a =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="dt">b =</span> <span class="dv">3213232</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">)</a></code></pre></div>
<p>because no alignment detection was built in. With <code>strict = FALSE</code>, the spacing would have been kept, however, <code>strict = FALSE</code> has a number of other implications because it is in general less invasive (e.g. it would not add braces to the following expression, whereas <code>strict = TRUE</code> would):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="cf">if</span> (<span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(another, arg)</a></code></pre></div>
<p>Back to the initial topic, styler &gt;= 1.1.1.9003 detects the aforementioned alignment. This vignette describes how an aligned code is defined by styler and gives some examples so users can format their aligned code to match the definition styler uses to ensure their code is not unintentionally reformatted.</p>
<div id="function-calls" class="section level2">
<h2 class="hasAnchor">
<a href="#function-calls" class="anchor"></a>function calls</h2>
<div id="non-technical" class="section level3">
<h3 class="hasAnchor">
<a href="#non-technical" class="anchor"></a>Non-technical</h3>
<p>If all arguments in the first column are named: Make commas match position vertically and right align everything between commas</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># all arguments of first column named -&gt; must right align</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co"># aligned if the (imaginary) comma on the last line is in line with the commas </span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co"># from the two top lines.</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw">fell</span>(</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  <span class="dt">x  =</span>    <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  <span class="dt">y  =</span>   <span class="dv">23</span>,</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  <span class="dt">zz =</span> <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">)</a></code></pre></div>
<p>If not all arguments of the first column are named: Make all but the first column’s commas match position vertically and right align everything between the commas, except before the first comma on a line, give priority to correctly indent.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># not all arguments of first column (f = NULL and 13231) named, hence, only </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co"># commas of all but the first column must agree.</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">gell</span>(</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  <span class="dv">2</span>,        <span class="dt">g =</span> <span class="kw">gg</span>(x), <span class="dt">n  =</span> <span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">  <span class="dv">13231</span>,  <span class="dt">fds =</span>    <span class="dv">-1</span>, <span class="dt">gz =</span> f <span class="op">/</span><span class="st"> </span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">)</a></code></pre></div>
<p>By <em>align everything in between the commas</em>, we mean put zero space before a comma and at least one after. Note that the arguments on the first line are ignored when detecting alignment, which is best shown when code is formatted such that no line breaks will be modified by styler (which is the case if all names on the first line are unnamed and all subsequent are named), like here:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">map</span>(x, f, </a>
<a class="sourceLine" id="cb6-2" data-line-number="2"> <span class="dt">arg1 =</span>  <span class="dv">121</span>,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"> <span class="dt">arg2 =</span>    <span class="dv">1</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">)</a></code></pre></div>
</div>
</div>
<div id="technical" class="section level2">
<h2 class="hasAnchor">
<a href="#technical" class="anchor"></a>technical</h2>
<p>Function calls are aligned if <strong>all</strong> of the following conditions hold (for all but the very first line (i.e. <code>call(</code> below):</p>
<ul>
<li>first column has same number of lag spaces. This basically means that the indention is identical for all columns (except for the closing brace if it is on its own line). The below example has one column, because the maximal number of commas on one line is one.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># holds</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  <span class="dt">a =</span>  <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  <span class="dt">b =</span> <span class="dv">32</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co"># doesn't hold</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">  <span class="dt">a =</span>  <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">   <span class="dt">b =</span> <span class="dv">32</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11">)</a></code></pre></div>
<ul>
<li>spacing around comma (0 before, &gt; 1 after, &gt;= 0 after last column on line) and spacing around <code>=</code> (at least one before and after).</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># holds</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">  <span class="dt">a =</span>  <span class="dv">3</span>, <span class="dt">k  =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  <span class="dt">b =</span> <span class="dv">32</span>,    <span class="dv">222</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co"># doesn't hold</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">  <span class="dt">a =</span>  <span class="dv">3</span> ,</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">  <span class="dt">b =</span> <span class="dv">32</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">)</a></code></pre></div>
<ul>
<li>All commas from all columns are aligned. This means that for every column, all commas must be on the same positions as the commas from the other lines. If not all arguments are named in the first column, this column is not considered. The reason to exclude the first column is that, as in the example below, it is possible that some arguments are named while others are not. Then, it is not generally possible to keep the first rule (i.e. indention identical across lines) as well as ensuring that the comma does not have any spaces before it and that the comma is aligned with the other lines. This is shown below with the line <code>f(x, y),</code>. For this reason, the requirements exclude the first column in such cases. The <em>holds</em> example shows that is is possible (but not required) for named arguments to also have the commas separating the first and second column aligned.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># holds</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">  <span class="dt">a =</span>  <span class="kw">ff</span>(<span class="st">"pk"</span>), <span class="dt">k  =</span> <span class="dv">3</span>, <span class="dt">x =</span>  <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">  <span class="dt">b =</span>     <span class="kw">f</span>(<span class="op">-</span>g), <span class="dv">22</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">yy =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">  <span class="dt">c =</span>         <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  <span class="kw">f</span>(x, y), </a>
<a class="sourceLine" id="cb9-7" data-line-number="7">  k</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb9-9" data-line-number="9"></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co"># doesn't hold</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/call">call</a></span>(</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">  <span class="dt">a =</span>   <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">  <span class="dt">b =</span> <span class="dv">32</span>, <span class="dt">c =</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14">)</a></code></pre></div>
<p>Note that the above definition does not check alignment of <code>=</code>, so styler will treat the following as aligned:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">rge</span>(</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  <span class="dt">x  =</span> <span class="dv">99</span>, <span class="dt">x =</span>  <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">  <span class="dt">fs =</span>  <span class="dv">1</span>,  <span class="dt">y =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">)</a></code></pre></div>
</div>
<div id="comments" class="section level2">
<h2 class="hasAnchor">
<a href="#comments" class="anchor"></a>comments</h2>
<p>not supported yet.</p>
</div>
<div id="assignment" class="section level2">
<h2 class="hasAnchor">
<a href="#assignment" class="anchor"></a>assignment</h2>
<p>not supported yet.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#function-calls">function calls</a></li>
      <li><a href="#technical">technical</a></li>
      <li><a href="#comments">comments</a></li>
      <li><a href="#assignment">assignment</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://krlmlr.info">Kirill Müller</a>, <a href="http://lorenzwalthert.netlify.com">Lorenz Walthert</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
